document.addEventListener("DOMContentLoaded",(()=>{const e={inputArea:document.getElementById("input-area"),outputArea:document.getElementById("output-area"),fromBaseSelect:document.getElementById("from-base-select"),toBaseSelect:document.getElementById("to-base-select"),themeToggle:document.getElementById("theme-toggle"),swapBtn:document.getElementById("swap-btn"),body:document.body},t={Numerical:{toBigInt(e,t){const a=parseInt(t),o=e.replace(/\s/g,"").toLowerCase();if(""===o)return 0n;let r=0n;const l="0123456789abcdef";for(const e of o){const t=l.indexOf(e);if(-1===t||t>=a)throw new Error(`'${e}' is not a valid digit for Base-${a}.`);r=r*BigInt(a)+BigInt(t)}return r},fromBigInt(e,t){return e.toString(parseInt(t)).toUpperCase()}},Text:{toCharCodes(e){const t=[];for(let a=0;a<e.length;a++)t.push(e.charCodeAt(a));return t},fromCharCodes(e){return String.fromCharCode(...e)}}};function a(){const{inputArea:o,outputArea:r,fromBaseSelect:l,toBaseSelect:n}=e,c=o.value,d=l.value,s=n.value;if(d===s)return r.value="Source and target bases cannot be the same.",void(r.style.color="var(--warning-color)");if(""===c.trim())return void(r.value="");try{let e="";d==="text"?(e=t.Text.toCharCodes(c).map((e=>t.Numerical.fromBigInt(BigInt(e),s))).join(" ")):s==="text"?(e=t.Text.fromCharCodes(c.trim().split(/\s+/).map((e=>t.Numerical.toBigInt(e,d))))):(e=t.Numerical.fromBigInt(t.Numerical.toBigInt(c,d),s),"2"===s&&(e=e.replace(new RegExp("(.{4})","g"),"$1 ").trim())),r.value=e,r.style.color=""}catch(e){r.value=`ERROR: ${e.message}`,r.style.color="var(--error-color)"}}function o(){const e=document.querySelector(".app-footer p");if(!e)return;const t=["M","a","d","e"," ","W","i","t","h",'<span class="heart-icon">❤️</span>',"B","y"," ","M",".","A"];e.innerHTML="",e.classList.add("typing");let a=0;const r=150;function l(){a<t.length?(e.innerHTML+=t[a],a++,setTimeout(l,r)):setTimeout((()=>{e.classList.remove("typing")}),750)}setTimeout(l,500)}[e.inputArea,e.fromBaseSelect,e.toBaseSelect].forEach((e=>{e.addEventListener("input",a),e.addEventListener("change",a)})),e.swapBtn.addEventListener("click",(()=>{const{inputArea:t,outputArea:o,fromBaseSelect:r,toBaseSelect:l}=e;if(o.style.color)return;const n=r.value;r.value=l.value,l.value=n,t.value=o.value,a()}));const r=localStorage.getItem("theme");"dark"===r&&e.body.classList.add("dark"),e.themeToggle.addEventListener("click",(()=>{e.body.classList.toggle("dark"),localStorage.setItem("theme",e.body.classList.contains("dark")?"dark":"light")})),document.querySelectorAll(".copy-btn").forEach((e=>{e.addEventListener("click",(()=>{const t=e.dataset.target,a=document.getElementById(t);a.value&&!a.style.color&&navigator.clipboard.writeText(a.value).then((()=>{e.classList.add("copied"),setTimeout((()=>e.classList.remove("copied")),1500)}))}))})),document.querySelector(".paste-btn")?.addEventListener("click",(()=>{navigator.clipboard.readText().then((t=>{e.inputArea.value=t,a()})).catch((e=>{console.error("Failed to read clipboard: ",e)}))})),a(),o()}));
